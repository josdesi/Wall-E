<!DOCTYPE html>
<html>
<head>
	<title>Javascript Anonymus Function 2</title>
	<script src="https://code.angularjs.org/1.7.5/angular.min.js"></script>

</head>
<body>
<script type="text/javascript">
	var formattedAddress = "Calle Rufino Tamayo, Lote 1 Manzana 8, Conjunto Cutzamala, 55787, Tonanitlán, Méx., México";
	
	var n1 = 2;
	var num = ( n1 != 2 )? 5: 3;

	var findBy = ["conjunto","manzana"];
	var res = ( res == undefined ) ? 
		( function( str, words ){
			for( var i in words ){
				var word = words[ i ];
				var res = ( function( str, word ){
					str = str.toLowerCase();
					var list = str.split(",");
					for( var i in list ){
						var ref = list[ i ];
						if( ref.indexOf( word ) != -1 )
							return ref;
					}
				})( str, word );
				if( res != undefined )
					return res;
			}
		})( formattedAddress, findBy ): res;

	alert( res );
</script>
</body>
</html>